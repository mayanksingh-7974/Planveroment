<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>üåø PlantCare Pro - Complete Plant Management System</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  
  <style>
    :root {
      --primary: #2e7d32;
      --primary-light: #4caf50;
      --primary-dark: #1b5e20;
      --secondary: #00897b;
      --accent: #ff6f00;
      --warning: #f57c00;
      --danger: #d32f2f;
      --success: #388e3c;
      --info: #0288d1;
      --bg: #f8fdf8;
      --bg-secondary: #e8f5e9;
      --card-bg: #ffffff;
      --text: #1a1a1a;
      --text-light: #666;
      --border: #e0e0e0;
      --shadow: 0 4px 20px rgba(0,0,0,0.08);
      --shadow-lg: 0 8px 40px rgba(0,0,0,0.12);
    }

    .dark-theme {
      --bg: #0a1f0a;
      --bg-secondary: #132313;
      --card-bg: #1a2e1a;
      --text: #e8f5e9;
      --text-light: #a5d6a7;
      --border: #2e4a2e;
      --shadow: 0 4px 20px rgba(0,0,0,0.4);
      --shadow-lg: 0 8px 40px rgba(0,0,0,0.6);
    }

    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    body {
      font-family: 'Poppins', sans-serif;
      background: var(--bg);
      color: var(--text);
      line-height: 1.6;
      transition: background 0.3s, color 0.3s;
    }

    /* NAVIGATION */
    nav {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 15px 5%;
      background: var(--card-bg);
      box-shadow: var(--shadow);
      position: sticky;
      top: 0;
      z-index: 1000;
      border-bottom: 3px solid var(--primary);
    }

    .logo {
      display: flex;
      align-items: center;
      gap: 10px;
      font-weight: 700;
      font-size: 1.5rem;
      color: var(--primary);
    }

    .nav-actions {
      display: flex;
      gap: 15px;
      align-items: center;
      flex-wrap: wrap;
    }

    .icon-btn {
      background: none;
      border: none;
      font-size: 1.5rem;
      cursor: pointer;
      padding: 8px;
      border-radius: 8px;
      transition: all 0.3s;
      position: relative;
    }

    .icon-btn:hover {
      background: var(--bg-secondary);
      transform: scale(1.1);
    }

    .badge {
      position: absolute;
      top: 0;
      right: 0;
      background: var(--danger);
      color: white;
      border-radius: 50%;
      width: 18px;
      height: 18px;
      font-size: 0.7rem;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 600;
    }

    /* HERO SECTION */
    .hero {
      background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
      color: white;
      padding: 60px 5%;
      text-align: center;
      position: relative;
      overflow: hidden;
    }

    .hero::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: url('data:image/svg+xml,<svg width="100" height="100" xmlns="http://www.w3.org/2000/svg"><path d="M50 10 L50 90 M10 50 L90 50 M30 30 L70 70 M70 30 L30 70" stroke="rgba(255,255,255,0.1)" stroke-width="2" fill="none"/></svg>');
      opacity: 0.3;
    }

    .hero h1 {
      font-size: 3rem;
      margin-bottom: 15px;
      position: relative;
      z-index: 1;
    }

    .hero p {
      font-size: 1.2rem;
      opacity: 0.95;
      position: relative;
      z-index: 1;
      margin-bottom: 30px;
    }

    /* HERO SEARCH */
    .hero-search {
      max-width: 700px;
      margin: 0 auto;
      position: relative;
      z-index: 100;
    }

    .hero-search-box {
      position: relative;
      background: white;
      border-radius: 50px;
      overflow: hidden;
      box-shadow: 0 10px 40px rgba(0,0,0,0.2);
      transition: all 0.3s;
    }

    .hero-search-box:focus-within {
      box-shadow: 0 15px 60px rgba(0,0,0,0.3);
      transform: translateY(-2px);
    }

    .hero-search-icon {
      position: absolute;
      left: 25px;
      top: 50%;
      transform: translateY(-50%);
      font-size: 1.5rem;
      z-index: 2;
    }

    #hero-search {
      width: 100%;
      padding: 20px 60px 20px 70px;
      border: none;
      font-size: 1.1rem;
      font-family: inherit;
      background: white;
      color: #333;
      outline: none;
    }

    #hero-search::placeholder {
      color: #999;
    }

    .hero-search-clear {
      position: absolute;
      right: 20px;
      top: 50%;
      transform: translateY(-50%);
      background: var(--text-light);
      color: white;
      border: none;
      width: 30px;
      height: 30px;
      border-radius: 50%;
      font-size: 1.5rem;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      line-height: 1;
      transition: all 0.3s;
      z-index: 2;
    }

    .hero-search-clear:hover {
      background: var(--danger);
      transform: translateY(-50%) scale(1.1);
    }

    /* SEARCH RESULTS DROPDOWN */
    .search-results-dropdown {
      position: absolute;
      top: calc(100% + 10px);
      left: 0;
      right: 0;
      background: var(--card-bg);
      border-radius: 20px;
      box-shadow: var(--shadow-lg);
      max-height: 500px;
      overflow-y: auto;
      display: none;
      z-index: 1000;
    }

    .search-results-dropdown.active {
      display: block;
      animation: slideDown 0.3s ease;
    }

    @keyframes slideDown {
      from {
        opacity: 0;
        transform: translateY(-10px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .search-result-item {
      padding: 20px 25px;
      border-bottom: 1px solid var(--border);
      cursor: pointer;
      transition: all 0.3s;
      display: flex;
      gap: 20px;
      align-items: center;
    }

    .search-result-item:last-child {
      border-bottom: none;
    }

    .search-result-item:hover {
      background: var(--bg-secondary);
    }

    .search-result-image {
      width: 80px;
      height: 80px;
      border-radius: 12px;
      object-fit: cover;
      flex-shrink: 0;
    }

    .search-result-info {
      flex: 1;
    }

    .search-result-name {
      font-size: 1.2rem;
      font-weight: 700;
      color: var(--text);
      margin-bottom: 5px;
    }

    .search-result-scientific {
      font-size: 0.9rem;
      color: var(--text-light);
      font-style: italic;
      margin-bottom: 8px;
    }

    .search-result-quick-info {
      display: flex;
      gap: 15px;
      flex-wrap: wrap;
    }

    .search-result-badge {
      display: inline-flex;
      align-items: center;
      gap: 5px;
      padding: 4px 10px;
      background: var(--bg);
      border-radius: 12px;
      font-size: 0.8rem;
      color: var(--text-light);
    }

    .search-no-results {
      padding: 40px 25px;
      text-align: center;
      color: var(--text-light);
    }

    .search-no-results-icon {
      font-size: 3rem;
      margin-bottom: 10px;
      opacity: 0.5;
    }

    /* PLANT INFO MODAL */
    .plant-info-modal-content {
      max-height: 80vh;
      overflow-y: auto;
    }

    .plant-info-header {
      display: flex;
      gap: 25px;
      margin-bottom: 30px;
      align-items: flex-start;
    }

    .plant-info-image {
      width: 200px;
      height: 200px;
      border-radius: 20px;
      object-fit: cover;
      flex-shrink: 0;
      box-shadow: var(--shadow);
    }

    .plant-info-title-section {
      flex: 1;
    }

    .plant-info-title {
      font-size: 2rem;
      color: var(--primary);
      margin-bottom: 8px;
    }

    .plant-info-scientific {
      font-size: 1.1rem;
      color: var(--text-light);
      font-style: italic;
      margin-bottom: 15px;
    }

    .plant-info-tags-row {
      display: flex;
      gap: 10px;
      flex-wrap: wrap;
      margin-bottom: 15px;
    }

    .info-tag {
      padding: 8px 16px;
      background: var(--primary);
      color: white;
      border-radius: 20px;
      font-size: 0.85rem;
      font-weight: 600;
    }

    .info-tag.secondary {
      background: var(--secondary);
    }

    .info-tag.warning {
      background: var(--warning);
    }

    .plant-info-section {
      margin-bottom: 30px;
    }

    .plant-info-section h3 {
      color: var(--primary);
      margin-bottom: 15px;
      font-size: 1.3rem;
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .info-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 15px;
    }

    .info-item {
      background: var(--bg);
      padding: 15px;
      border-radius: 12px;
      display: flex;
      align-items: center;
      gap: 12px;
    }

    .info-item-icon {
      font-size: 1.8rem;
    }

    .info-item-content h4 {
      font-size: 0.85rem;
      color: var(--text-light);
      margin-bottom: 3px;
    }

    .info-item-content p {
      font-size: 1rem;
      font-weight: 600;
      color: var(--text);
    }

    /* MAIN CONTAINER */
    .container {
      max-width: 1400px;
      margin: -40px auto 40px;
      padding: 0 20px;
      position: relative;
      z-index: 10;
    }

    /* TABS */
    .tab-navigation {
      display: flex;
      gap: 10px;
      background: var(--card-bg);
      padding: 15px;
      border-radius: 15px;
      box-shadow: var(--shadow);
      margin-bottom: 30px;
      overflow-x: auto;
    }

    .tab-btn {
      padding: 12px 24px;
      border: none;
      background: transparent;
      color: var(--text);
      font-weight: 600;
      cursor: pointer;
      border-radius: 10px;
      transition: all 0.3s;
      white-space: nowrap;
    }

    .tab-btn:hover {
      background: var(--bg-secondary);
    }

    .tab-btn.active {
      background: var(--primary);
      color: white;
    }

    .tab-content {
      display: none;
    }

    .tab-content.active {
      display: block;
      animation: fadeIn 0.3s;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }

    /* DASHBOARD STATS */
    .stats-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
      gap: 20px;
      margin-bottom: 30px;
    }

    .stat-card {
      background: var(--card-bg);
      padding: 25px;
      border-radius: 15px;
      box-shadow: var(--shadow);
      display: flex;
      align-items: center;
      gap: 20px;
      transition: transform 0.3s;
      border-left: 4px solid var(--primary);
    }

    .stat-card:hover {
      transform: translateY(-5px);
      box-shadow: var(--shadow-lg);
    }

    .stat-icon {
      font-size: 3rem;
      opacity: 0.9;
    }

    .stat-info h3 {
      font-size: 2rem;
      color: var(--primary);
      margin-bottom: 5px;
    }

    .stat-info p {
      color: var(--text-light);
      font-size: 0.9rem;
    }

    /* CONTROLS */
    .controls-panel {
      background: var(--card-bg);
      padding: 25px;
      border-radius: 15px;
      box-shadow: var(--shadow);
      margin-bottom: 30px;
    }

    .controls-row {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 15px;
      margin-bottom: 15px;
    }

    .search-box {
      position: relative;
    }

    .search-box input {
      width: 100%;
      padding: 12px 40px 12px 15px;
      border: 2px solid var(--border);
      border-radius: 10px;
      font-size: 1rem;
      background: var(--bg);
      color: var(--text);
      transition: all 0.3s;
    }

    .search-box input:focus {
      outline: none;
      border-color: var(--primary);
      box-shadow: 0 0 0 3px rgba(46, 125, 50, 0.1);
    }

    .search-icon {
      position: absolute;
      right: 12px;
      top: 50%;
      transform: translateY(-50%);
      font-size: 1.2rem;
      color: var(--text-light);
    }

    select, .btn {
      padding: 12px 20px;
      border-radius: 10px;
      border: 2px solid var(--border);
      font-family: inherit;
      font-size: 1rem;
      cursor: pointer;
      background: var(--bg);
      color: var(--text);
      transition: all 0.3s;
    }

    select:focus {
      outline: none;
      border-color: var(--primary);
    }

    .btn {
      border: none;
      font-weight: 600;
      display: inline-flex;
      align-items: center;
      gap: 8px;
      justify-content: center;
    }

    .btn-primary {
      background: var(--primary);
      color: white;
    }

    .btn-primary:hover {
      background: var(--primary-dark);
      transform: translateY(-2px);
      box-shadow: var(--shadow);
    }

    .btn-secondary {
      background: var(--secondary);
      color: white;
    }

    .btn-danger {
      background: var(--danger);
      color: white;
    }

    .btn-success {
      background: var(--success);
      color: white;
    }

    .btn-small {
      padding: 6px 12px;
      font-size: 0.85rem;
    }

    /* PLANT GRID */
    .plant-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
      gap: 25px;
    }

    .plant-card {
      background: var(--card-bg);
      border-radius: 20px;
      overflow: hidden;
      box-shadow: var(--shadow);
      transition: all 0.3s;
      position: relative;
    }

    .plant-card:hover {
      transform: translateY(-8px);
      box-shadow: var(--shadow-lg);
    }

    .plant-image {
      position: relative;
      height: 220px;
      overflow: hidden;
    }

    .plant-image img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      transition: transform 0.3s;
    }

    .plant-card:hover .plant-image img {
      transform: scale(1.1);
    }

    .plant-tags {
      position: absolute;
      top: 15px;
      right: 15px;
      display: flex;
      flex-direction: column;
      gap: 8px;
    }

    .tag {
      background: rgba(255, 255, 255, 0.95);
      color: var(--primary);
      padding: 6px 14px;
      border-radius: 20px;
      font-size: 0.75rem;
      font-weight: 700;
      text-transform: uppercase;
      box-shadow: 0 2px 8px rgba(0,0,0,0.15);
    }

    .health-indicator {
      position: absolute;
      bottom: 15px;
      left: 15px;
      background: rgba(255, 255, 255, 0.95);
      padding: 6px 14px;
      border-radius: 20px;
      font-weight: 600;
      font-size: 0.8rem;
      display: flex;
      align-items: center;
      gap: 5px;
    }

    .health-excellent { color: var(--success); }
    .health-good { color: var(--primary); }
    .health-warning { color: var(--warning); }
    .health-danger { color: var(--danger); }

    .plant-info {
      padding: 20px;
    }

    .plant-header {
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
      margin-bottom: 15px;
    }

    .plant-name {
      font-size: 1.3rem;
      font-weight: 700;
      color: var(--text);
      margin-bottom: 5px;
    }

    .plant-scientific {
      font-size: 0.85rem;
      color: var(--text-light);
      font-style: italic;
    }

    .favorite-btn {
      background: none;
      border: none;
      font-size: 1.5rem;
      cursor: pointer;
      transition: transform 0.3s;
    }

    .favorite-btn:hover {
      transform: scale(1.2);
    }

    .care-metrics {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 12px;
      margin: 15px 0;
    }

    .metric {
      display: flex;
      align-items: center;
      gap: 8px;
      padding: 10px;
      background: var(--bg);
      border-radius: 10px;
      font-size: 0.85rem;
    }

    .progress-section {
      margin: 15px 0;
    }

    .progress-label {
      display: flex;
      justify-content: space-between;
      margin-bottom: 8px;
      font-size: 0.85rem;
      font-weight: 600;
    }

    .progress-bar {
      height: 10px;
      background: var(--border);
      border-radius: 5px;
      overflow: hidden;
      position: relative;
    }

    .progress-fill {
      height: 100%;
      background: linear-gradient(90deg, var(--primary), var(--primary-light));
      border-radius: 5px;
      transition: width 0.5s;
      position: relative;
    }

    .progress-fill::after {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
      animation: shimmer 2s infinite;
    }

    @keyframes shimmer {
      0% { transform: translateX(-100%); }
      100% { transform: translateX(100%); }
    }

    .action-buttons {
      display: flex;
      gap: 10px;
      margin-top: 15px;
    }

    .action-buttons .btn {
      flex: 1;
    }

    /* MODAL */
    .modal {
      display: none;
      position: fixed;
      inset: 0;
      background: rgba(0, 0, 0, 0.7);
      z-index: 2000;
      justify-content: center;
      align-items: center;
      backdrop-filter: blur(5px);
      padding: 20px;
    }

    .modal.active {
      display: flex;
      animation: fadeIn 0.3s;
    }

    .modal-content {
      background: var(--card-bg);
      padding: 35px;
      border-radius: 20px;
      width: 100%;
      max-width: 600px;
      max-height: 90vh;
      overflow-y: auto;
      box-shadow: var(--shadow-lg);
    }

    .modal-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 25px;
    }

    .modal-header h2 {
      color: var(--primary);
      font-size: 1.8rem;
    }

    .close-btn {
      background: none;
      border: none;
      font-size: 2rem;
      cursor: pointer;
      color: var(--text-light);
      line-height: 1;
    }

    .form-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 20px;
    }

    .form-group {
      margin-bottom: 20px;
    }

    .form-group.full-width {
      grid-column: 1 / -1;
    }

    .form-group label {
      display: block;
      margin-bottom: 8px;
      font-weight: 600;
      color: var(--text);
    }

    .form-group input,
    .form-group select,
    .form-group textarea {
      width: 100%;
      padding: 12px;
      border: 2px solid var(--border);
      border-radius: 10px;
      font-family: inherit;
      font-size: 1rem;
      background: var(--bg);
      color: var(--text);
    }

    .form-group textarea {
      resize: vertical;
      min-height: 100px;
    }

    .form-group input:focus,
    .form-group select:focus,
    .form-group textarea:focus {
      outline: none;
      border-color: var(--primary);
      box-shadow: 0 0 0 3px rgba(46, 125, 50, 0.1);
    }

    .form-actions {
      display: flex;
      gap: 15px;
      margin-top: 25px;
    }

    .form-actions .btn {
      flex: 1;
      padding: 15px;
    }

    /* CALENDAR */
    .calendar-container {
      background: var(--card-bg);
      padding: 25px;
      border-radius: 15px;
      box-shadow: var(--shadow);
    }

    .calendar-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 20px;
    }

    .calendar-header h3 {
      font-size: 1.5rem;
      color: var(--primary);
    }

    .calendar-nav {
      display: flex;
      gap: 10px;
    }

    .calendar-grid {
      display: grid;
      grid-template-columns: repeat(7, 1fr);
      gap: 10px;
    }

    .calendar-day {
      aspect-ratio: 1;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      padding: 10px;
      border-radius: 10px;
      background: var(--bg);
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s;
      position: relative;
    }

    .calendar-day:hover {
      background: var(--primary-light);
      color: white;
      transform: scale(1.05);
    }

    .calendar-day.has-tasks::after {
      content: '';
      position: absolute;
      bottom: 5px;
      width: 6px;
      height: 6px;
      background: var(--accent);
      border-radius: 50%;
    }

    .calendar-day.today {
      background: var(--primary);
      color: white;
    }

    .day-name {
      grid-column: span 1;
      text-align: center;
      font-weight: 700;
      padding: 10px;
      color: var(--text-light);
    }

    /* TIMELINE */
    .timeline {
      position: relative;
      padding: 20px 0;
    }

    .timeline::before {
      content: '';
      position: absolute;
      left: 30px;
      top: 0;
      bottom: 0;
      width: 2px;
      background: var(--border);
    }

    .timeline-item {
      position: relative;
      padding-left: 70px;
      margin-bottom: 30px;
    }

    .timeline-icon {
      position: absolute;
      left: 15px;
      width: 30px;
      height: 30px;
      background: var(--primary);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      font-size: 1rem;
      z-index: 1;
    }

    .timeline-content {
      background: var(--card-bg);
      padding: 20px;
      border-radius: 15px;
      box-shadow: var(--shadow);
    }

    /* KNOWLEDGE BASE */
    .knowledge-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
      gap: 20px;
    }

    .knowledge-card {
      background: var(--card-bg);
      padding: 25px;
      border-radius: 15px;
      box-shadow: var(--shadow);
      cursor: pointer;
      transition: all 0.3s;
    }

    .knowledge-card:hover {
      transform: translateY(-5px);
      box-shadow: var(--shadow-lg);
    }

    .knowledge-card h3 {
      color: var(--primary);
      margin-bottom: 15px;
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .knowledge-card p {
      color: var(--text-light);
      line-height: 1.6;
    }

    /* NOTIFICATIONS */
    .notification-panel {
      position: fixed;
      top: 80px;
      right: 20px;
      width: 350px;
      max-height: 500px;
      background: var(--card-bg);
      border-radius: 15px;
      box-shadow: var(--shadow-lg);
      overflow: hidden;
      display: none;
      z-index: 1500;
    }

    .notification-panel.active {
      display: block;
      animation: slideIn 0.3s;
    }

    @keyframes slideIn {
      from {
        opacity: 0;
        transform: translateX(100%);
      }
      to {
        opacity: 1;
        transform: translateX(0);
      }
    }

    .notification-header {
      padding: 20px;
      background: var(--primary);
      color: white;
      font-weight: 700;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .notification-list {
      max-height: 400px;
      overflow-y: auto;
    }

    .notification-item {
      padding: 15px 20px;
      border-bottom: 1px solid var(--border);
      cursor: pointer;
      transition: background 0.3s;
    }

    .notification-item:hover {
      background: var(--bg-secondary);
    }

    .notification-item.unread {
      background: rgba(46, 125, 50, 0.05);
      border-left: 3px solid var(--primary);
    }

    /* CHARTS */
    .chart-container {
      background: var(--card-bg);
      padding: 25px;
      border-radius: 15px;
      box-shadow: var(--shadow);
      margin-bottom: 25px;
    }

    .chart-header {
      margin-bottom: 20px;
    }

    .chart-header h3 {
      color: var(--primary);
      font-size: 1.3rem;
    }

    .chart-bars {
      display: flex;
      align-items: flex-end;
      gap: 15px;
      height: 250px;
      padding: 20px 0;
    }

    .chart-bar {
      flex: 1;
      background: var(--primary);
      border-radius: 8px 8px 0 0;
      position: relative;
      transition: all 0.3s;
      cursor: pointer;
    }

    .chart-bar:hover {
      background: var(--primary-light);
      transform: translateY(-5px);
    }

    .chart-label {
      text-align: center;
      margin-top: 10px;
      font-size: 0.85rem;
      color: var(--text-light);
    }

    /* TIPS SECTION */
    .tips-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 15px;
      margin-top: 20px;
    }

    .tip-card {
      background: linear-gradient(135deg, var(--primary-light), var(--primary));
      color: white;
      padding: 20px;
      border-radius: 15px;
      display: flex;
      align-items: flex-start;
      gap: 15px;
      box-shadow: var(--shadow);
      transition: transform 0.3s;
    }

    .tip-card:hover {
      transform: translateY(-3px);
    }

    .tip-icon {
      font-size: 2rem;
      flex-shrink: 0;
    }

    .tip-content h4 {
      margin-bottom: 8px;
      font-size: 1.1rem;
    }

    .tip-content p {
      font-size: 0.9rem;
      opacity: 0.95;
    }

    /* EMPTY STATE */
    .empty-state {
      text-align: center;
      padding: 60px 20px;
    }

    .empty-state-icon {
      font-size: 5rem;
      margin-bottom: 20px;
      opacity: 0.5;
    }

    .empty-state h3 {
      color: var(--text);
      margin-bottom: 10px;
    }

    .empty-state p {
      color: var(--text-light);
      margin-bottom: 20px;
    }

    /* RESPONSIVE */
    @media (max-width: 768px) {
      .hero h1 {
        font-size: 2rem;
      }

      .hero p {
        font-size: 1rem;
      }

      .hero-search {
        max-width: 100%;
        padding: 0 15px;
      }

      #hero-search {
        padding: 15px 50px 15px 60px;
        font-size: 1rem;
      }

      .search-results-dropdown {
        max-height: 400px;
      }

      .search-result-item {
        flex-direction: column;
        text-align: center;
      }

      .search-result-image {
        width: 100%;
        height: 180px;
      }

      .plant-info-header {
        flex-direction: column;
      }

      .plant-info-image {
        width: 100%;
        height: 250px;
      }

      .stats-grid {
        grid-template-columns: 1fr;
      }

      .controls-row {
        grid-template-columns: 1fr;
      }

      .plant-grid {
        grid-template-columns: 1fr;
      }

      .form-grid {
        grid-template-columns: 1fr;
      }

      .notification-panel {
        width: calc(100% - 40px);
        right: 20px;
      }

      .tab-navigation {
        overflow-x: auto;
      }

      nav {
        flex-wrap: wrap;
      }

      .nav-actions {
        width: 100%;
        justify-content: flex-end;
      }

      .action-buttons {
        flex-direction: column;
      }

      .info-grid {
        grid-template-columns: 1fr;
      }
    }

    /* ANIMATIONS */
    .pulse {
      animation: pulse 2s infinite;
    }

    @keyframes pulse {
      0%, 100% {
        opacity: 1;
      }
      50% {
        opacity: 0.6;
      }
    }

    /* SCROLLBAR */
    ::-webkit-scrollbar {
      width: 10px;
      height: 10px;
    }

    ::-webkit-scrollbar-track {
      background: var(--bg);
    }

    ::-webkit-scrollbar-thumb {
      background: var(--primary);
      border-radius: 5px;
    }

    ::-webkit-scrollbar-thumb:hover {
      background: var(--primary-dark);
    }
  </style>
</head>
<body>

  <!-- NAVIGATION -->
  <nav>
    <div class="logo">
      <span>üåø</span>
      <span>PlantCare Pro</span>
    </div>
    <div class="nav-actions">
      <button class="icon-btn" id="notifications-btn" title="Notifications">
        üîî
        <span class="badge" id="notification-count">0</span>
      </button>
      <button class="icon-btn" id="theme-toggle" title="Toggle Theme">üåì</button>
      <button class="btn btn-primary" onclick="openModal('add-plant')">
        ‚ûï Add Plant
      </button>
    </div>
  </nav>

  <!-- HERO -->
  <section class="hero">
    <h1>üåø Your Digital Garden</h1>
    <p>Manage, track, and grow your plant collection with intelligent care reminders</p>
    
    <!-- QUICK SEARCH -->
    <div class="hero-search">
      <div class="hero-search-box">
        <span class="hero-search-icon">üîç</span>
        <input type="text" id="hero-search" placeholder="Quick search: Type plant name to see instant details..." autocomplete="off">
        <button class="hero-search-clear" id="clear-search" style="display: none;">&times;</button>
      </div>
      <div class="search-results-dropdown" id="search-dropdown">
        <!-- Search results will appear here -->
      </div>
    </div>
  </section>

  <!-- MAIN CONTAINER -->
  <div class="container">
    
    <!-- TABS -->
    <div class="tab-navigation">
      <button class="tab-btn active" onclick="switchTab('dashboard')">üìä Dashboard</button>
      <button class="tab-btn" onclick="switchTab('my-plants')">ü™¥ My Plants</button>
      <button class="tab-btn" onclick="switchTab('calendar')">üìÖ Care Calendar</button>
      <button class="tab-btn" onclick="switchTab('analytics')">üìà Analytics</button>
      <button class="tab-btn" onclick="switchTab('knowledge')">üìö Knowledge Base</button>
    </div>

    <!-- DASHBOARD TAB -->
    <div id="dashboard" class="tab-content active">
      
      <!-- Stats Grid -->
      <div class="stats-grid">
        <div class="stat-card">
          <div class="stat-icon">ü™¥</div>
          <div class="stat-info">
            <h3 id="total-plants">0</h3>
            <p>Total Plants</p>
          </div>
        </div>
        <div class="stat-card">
          <div class="stat-icon">üíß</div>
          <div class="stat-info">
            <h3 id="need-water">0</h3>
            <p>Need Water</p>
          </div>
        </div>
        <div class="stat-card">
          <div class="stat-icon">üå±</div>
          <div class="stat-info">
            <h3 id="healthy-plants">0</h3>
            <p>Healthy Plants</p>
          </div>
        </div>
        <div class="stat-card">
          <div class="stat-icon">‚ö†Ô∏è</div>
          <div class="stat-info">
            <h3 id="need-attention">0</h3>
            <p>Need Attention</p>
          </div>
        </div>
      </div>

      <!-- Today's Tasks -->
      <div class="chart-container">
        <div class="chart-header">
          <h3>üìã Today's Care Tasks</h3>
        </div>
        <div id="today-tasks" class="timeline">
          <!-- Tasks will be added here -->
        </div>
      </div>

      <!-- Quick Tips -->
      <div class="chart-container">
        <div class="chart-header">
          <h3>üí° Quick Care Tips</h3>
        </div>
        <div class="tips-grid">
          <div class="tip-card">
            <div class="tip-icon">üíß</div>
            <div class="tip-content">
              <h4>Watering</h4>
              <p>Check soil moisture before watering. Most plants prefer slightly dry soil between waterings.</p>
            </div>
          </div>
          <div class="tip-card">
            <div class="tip-icon">‚òÄÔ∏è</div>
            <div class="tip-content">
              <h4>Lighting</h4>
              <p>Rotate plants weekly for even growth. South-facing windows provide the most light.</p>
            </div>
          </div>
          <div class="tip-card">
            <div class="tip-icon">üå°Ô∏è</div>
            <div class="tip-content">
              <h4>Temperature</h4>
              <p>Most houseplants thrive between 65-75¬∞F. Avoid drafts and sudden temperature changes.</p>
            </div>
          </div>
          <div class="tip-card">
            <div class="tip-icon">ü™¥</div>
            <div class="tip-content">
              <h4>Repotting</h4>
              <p>Repot when roots circle the pot or grow through drainage holes, usually every 1-2 years.</p>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- MY PLANTS TAB -->
    <div id="my-plants" class="tab-content">
      
      <!-- Controls -->
      <div class="controls-panel">
        <div class="controls-row">
          <div class="search-box">
            <input type="text" id="search-input" placeholder="Search plants by name...">
            <span class="search-icon">üîç</span>
          </div>
          <select id="filter-type">
            <option value="all">All Types</option>
            <option value="indoor">Indoor</option>
            <option value="outdoor">Outdoor</option>
            <option value="succulent">Succulent</option>
            <option value="tropical">Tropical</option>
            <option value="herb">Herb</option>
          </select>
          <select id="filter-health">
            <option value="all">All Health Levels</option>
            <option value="excellent">Excellent</option>
            <option value="good">Good</option>
            <option value="warning">Needs Care</option>
            <option value="danger">Critical</option>
          </select>
          <select id="sort-by">
            <option value="name">Sort by Name</option>
            <option value="water">Water Needed</option>
            <option value="health">Health Status</option>
            <option value="newest">Newest First</option>
          </select>
        </div>
      </div>

      <!-- Plant Grid -->
      <div class="plant-grid" id="plant-grid">
        <!-- Plants will be rendered here -->
      </div>

      <!-- Empty State -->
      <div id="empty-state" class="empty-state" style="display: none;">
        <div class="empty-state-icon">üå±</div>
        <h3>No plants yet!</h3>
        <p>Start your digital garden by adding your first plant</p>
        <button class="btn btn-primary" onclick="openModal('add-plant')">
          ‚ûï Add Your First Plant
        </button>
      </div>
    </div>

    <!-- CALENDAR TAB -->
    <div id="calendar" class="tab-content">
      <div class="calendar-container">
        <div class="calendar-header">
          <h3 id="calendar-month">March 2024</h3>
          <div class="calendar-nav">
            <button class="btn btn-secondary btn-small" onclick="changeMonth(-1)">‚óÄ Prev</button>
            <button class="btn btn-primary btn-small" onclick="goToToday()">Today</button>
            <button class="btn btn-secondary btn-small" onclick="changeMonth(1)">Next ‚ñ∂</button>
          </div>
        </div>
        <div class="calendar-grid" id="calendar-grid">
          <!-- Calendar will be rendered here -->
        </div>
      </div>

      <!-- Selected Day Tasks -->
      <div class="chart-container" style="margin-top: 25px;">
        <div class="chart-header">
          <h3>üìã Tasks for <span id="selected-date">Today</span></h3>
        </div>
        <div id="day-tasks" class="timeline">
          <!-- Day tasks will appear here -->
        </div>
      </div>
    </div>

    <!-- ANALYTICS TAB -->
    <div id="analytics" class="tab-content">
      
      <!-- Growth Chart -->
      <div class="chart-container">
        <div class="chart-header">
          <h3>üìä Plant Collection Growth</h3>
          <p style="color: var(--text-light); font-size: 0.9rem;">Track how your collection has grown over time</p>
        </div>
        <div class="chart-bars" id="growth-chart">
          <!-- Chart bars will be added here -->
        </div>
      </div>

      <!-- Statistics -->
      <div class="stats-grid">
        <div class="stat-card">
          <div class="stat-icon">üìÖ</div>
          <div class="stat-info">
            <h3 id="avg-age">0</h3>
            <p>Avg Plant Age (days)</p>
          </div>
        </div>
        <div class="stat-card">
          <div class="stat-icon">üíß</div>
          <div class="stat-info">
            <h3 id="water-frequency">0</h3>
            <p>Avg Water Frequency</p>
          </div>
        </div>
        <div class="stat-card">
          <div class="stat-icon">‚ù§Ô∏è</div>
          <div class="stat-info">
            <h3 id="favorite-count">0</h3>
            <p>Favorite Plants</p>
          </div>
        </div>
        <div class="stat-card">
          <div class="stat-icon">üèÜ</div>
          <div class="stat-info">
            <h3 id="care-streak">0</h3>
            <p>Day Care Streak</p>
          </div>
        </div>
      </div>

      <!-- Type Distribution -->
      <div class="chart-container">
        <div class="chart-header">
          <h3>üåø Plant Type Distribution</h3>
        </div>
        <div id="type-distribution">
          <!-- Distribution will be shown here -->
        </div>
      </div>
    </div>

    <!-- KNOWLEDGE BASE TAB -->
    <div id="knowledge" class="tab-content">
      <div class="knowledge-grid">
        
        <div class="knowledge-card" onclick="showKnowledge('watering')">
          <h3>üíß Watering Guide</h3>
          <p>Learn the proper watering techniques for different plant types and seasons.</p>
        </div>

        <div class="knowledge-card" onclick="showKnowledge('light')">
          <h3>‚òÄÔ∏è Light Requirements</h3>
          <p>Understanding light levels and how to position your plants for optimal growth.</p>
        </div>

        <div class="knowledge-card" onclick="showKnowledge('soil')">
          <h3>ü™¥ Soil & Fertilizer</h3>
          <p>Choosing the right soil mix and fertilization schedule for healthy roots.</p>
        </div>

        <div class="knowledge-card" onclick="showKnowledge('pests')">
          <h3>üêõ Pest Management</h3>
          <p>Identify and treat common plant pests naturally and effectively.</p>
        </div>

        <div class="knowledge-card" onclick="showKnowledge('propagation')">
          <h3>üå± Propagation</h3>
          <p>Multiply your plant collection through cuttings, division, and seeds.</p>
        </div>

        <div class="knowledge-card" onclick="showKnowledge('troubleshooting')">
          <h3>üîß Troubleshooting</h3>
          <p>Diagnose and fix common plant problems like yellowing leaves and drooping.</p>
        </div>

        <div class="knowledge-card" onclick="showKnowledge('seasonal')">
          <h3>üåç Seasonal Care</h3>
          <p>Adjust your care routine based on seasons and climate changes.</p>
        </div>

        <div class="knowledge-card" onclick="showKnowledge('repotting')">
          <h3>üì¶ Repotting Guide</h3>
          <p>When and how to repot your plants for continued healthy growth.</p>
        </div>

      </div>
    </div>

  </div>

  <!-- NOTIFICATION PANEL -->
  <div class="notification-panel" id="notification-panel">
    <div class="notification-header">
      <span>Notifications</span>
      <button class="close-btn" onclick="closeNotifications()" style="color: white;">&times;</button>
    </div>
    <div class="notification-list" id="notification-list">
      <!-- Notifications will be added here -->
    </div>
  </div>

  <!-- ADD/EDIT PLANT MODAL -->
  <div class="modal" id="add-plant">
    <div class="modal-content">
      <div class="modal-header">
        <h2 id="modal-title">Add New Plant</h2>
        <button class="close-btn" onclick="closeModal('add-plant')">&times;</button>
      </div>
      
      <form id="plant-form" onsubmit="savePlant(event)">
        <div class="form-grid">
          
          <div class="form-group full-width">
            <label>Plant Name *</label>
            <input type="text" id="plant-name" placeholder="e.g., Monstera Deliciosa" required>
          </div>

          <div class="form-group">
            <label>Scientific Name</label>
            <input type="text" id="plant-scientific" placeholder="e.g., Monstera deliciosa">
          </div>

          <div class="form-group">
            <label>Plant Type *</label>
            <select id="plant-type" required>
              <option value="indoor">Indoor</option>
              <option value="outdoor">Outdoor</option>
              <option value="succulent">Succulent</option>
              <option value="tropical">Tropical</option>
              <option value="herb">Herb</option>
            </select>
          </div>

          <div class="form-group">
            <label>Water Frequency (days) *</label>
            <input type="number" id="plant-water" min="1" max="90" value="7" required>
          </div>

          <div class="form-group">
            <label>Fertilize Frequency (days)</label>
            <input type="number" id="plant-fertilize" min="1" max="365" value="30">
          </div>

          <div class="form-group">
            <label>Light Requirement *</label>
            <select id="plant-light" required>
              <option value="low">Low Light</option>
              <option value="medium">Medium Light</option>
              <option value="bright">Bright Indirect</option>
              <option value="direct">Direct Sunlight</option>
            </select>
          </div>

          <div class="form-group">
            <label>Humidity Level *</label>
            <select id="plant-humidity" required>
              <option value="low">Low (30-40%)</option>
              <option value="medium">Medium (40-60%)</option>
              <option value="high">High (60-80%)</option>
            </select>
          </div>

          <div class="form-group full-width">
            <label>Image URL</label>
            <input type="url" id="plant-image" placeholder="https://example.com/plant.jpg">
          </div>

          <div class="form-group full-width">
            <label>Care Notes</label>
            <textarea id="plant-notes" placeholder="Add any special care instructions..."></textarea>
          </div>

          <div class="form-group">
            <label>Location</label>
            <input type="text" id="plant-location" placeholder="e.g., Living room, Balcony">
          </div>

          <div class="form-group">
            <label>Purchase/Acquired Date</label>
            <input type="date" id="plant-acquired">
          </div>

        </div>

        <div class="form-actions">
          <button type="submit" class="btn btn-primary">üíæ Save Plant</button>
          <button type="button" class="btn btn-secondary" onclick="closeModal('add-plant')">Cancel</button>
        </div>
      </form>
    </div>
  </div>

  <!-- KNOWLEDGE MODAL -->
  <div class="modal" id="knowledge-modal">
    <div class="modal-content">
      <div class="modal-header">
        <h2 id="knowledge-title">Knowledge Base</h2>
        <button class="close-btn" onclick="closeModal('knowledge-modal')">&times;</button>
      </div>
      <div id="knowledge-content">
        <!-- Content will be loaded here -->
      </div>
    </div>
  </div>

  <!-- PLANT DETAIL MODAL -->
  <div class="modal" id="plant-detail">
    <div class="modal-content">
      <div class="modal-header">
        <h2 id="detail-plant-name">Plant Details</h2>
        <button class="close-btn" onclick="closeModal('plant-detail')">&times;</button>
      </div>
      <div id="plant-detail-content">
        <!-- Detailed plant info will be shown here -->
      </div>
    </div>
  </div>

  <!-- QUICK PLANT INFO MODAL (from search) -->
  <div class="modal" id="quick-plant-info">
    <div class="modal-content plant-info-modal-content">
      <div class="modal-header">
        <h2>üåø Plant Information</h2>
        <button class="close-btn" onclick="closeModal('quick-plant-info')">&times;</button>
      </div>
      <div id="quick-plant-content">
        <!-- Quick plant info will be shown here -->
      </div>
    </div>
  </div>

  <script>
    // ==================== DATA MANAGEMENT ====================
    
    let plants = JSON.parse(localStorage.getItem('plants')) || [];
    let currentEditId = null;
    let currentMonth = new Date();
    let notifications = JSON.parse(localStorage.getItem('notifications')) || [];

    // Sample initial data
    if (plants.length === 0) {
      plants = [
        {
          id: Date.now() + 1,
          name: "Monstera Deliciosa",
          scientificName: "Monstera deliciosa",
          type: "tropical",
          waterDays: 7,
          fertilizeDays: 30,
          light: "bright",
          humidity: "high",
          image: "https://images.unsplash.com/photo-1614594975525-e45190c55d0b?w=600",
          notes: "Swiss cheese plant, loves climbing",
          location: "Living Room",
          acquired: "2024-01-15",
          lastWatered: new Date(Date.now() - 5 * 24 * 60 * 60 * 1000).toISOString(),
          lastFertilized: new Date(Date.now() - 20 * 24 * 60 * 60 * 1000).toISOString(),
          favorite: true,
          healthScore: 95
        },
        {
          id: Date.now() + 2,
          name: "Snake Plant",
          scientificName: "Sansevieria trifasciata",
          type: "indoor",
          waterDays: 14,
          fertilizeDays: 60,
          light: "low",
          humidity: "low",
          image: "https://images.unsplash.com/photo-1593691509543-c55fb32b6f70?w=600",
          notes: "Very low maintenance, drought tolerant",
          location: "Bedroom",
          acquired: "2024-02-01",
          lastWatered: new Date(Date.now() - 2 * 24 * 60 * 60 * 1000).toISOString(),
          lastFertilized: new Date(Date.now() - 40 * 24 * 60 * 60 * 1000).toISOString(),
          favorite: false,
          healthScore: 100
        },
        {
          id: Date.now() + 3,
          name: "Aloe Vera",
          scientificName: "Aloe barbadensis",
          type: "succulent",
          waterDays: 21,
          fertilizeDays: 90,
          light: "bright",
          humidity: "low",
          image: "https://images.unsplash.com/photo-1509420316984-6f5d8f7f9b75?w=600",
          notes: "Medicinal properties, very drought resistant",
          location: "Kitchen",
          acquired: "2023-12-10",
          lastWatered: new Date(Date.now() - 18 * 24 * 60 * 60 * 1000).toISOString(),
          lastFertilized: new Date(Date.now() - 60 * 24 * 60 * 60 * 1000).toISOString(),
          favorite: true,
          healthScore: 90
        }
      ];
      savePlants();
    }

    // ==================== UTILITY FUNCTIONS ====================
    
    function savePlants() {
      localStorage.setItem('plants', JSON.stringify(plants));
      updateAllStats();
      checkNotifications();
    }

    function getDaysSince(dateString) {
      const date = new Date(dateString);
      const today = new Date();
      const diff = Math.abs(today - date);
      return Math.ceil(diff / (1000 * 60 * 60 * 24));
    }

    function getWaterProgress(plant) {
      const daysSinceWater = getDaysSince(plant.lastWatered);
      return Math.max(0, 100 - (daysSinceWater / plant.waterDays * 100));
    }

    function getHealthStatus(progress) {
      if (progress >= 70) return { level: 'excellent', label: 'Excellent', emoji: '‚ú®' };
      if (progress >= 40) return { level: 'good', label: 'Good', emoji: 'üëç' };
      if (progress >= 20) return { level: 'warning', label: 'Needs Care', emoji: '‚ö†Ô∏è' };
      return { level: 'danger', label: 'Critical', emoji: 'üö®' };
    }

    function switchTab(tabName) {
      // Hide all tabs
      document.querySelectorAll('.tab-content').forEach(tab => {
        tab.classList.remove('active');
      });
      
      // Remove active from all buttons
      document.querySelectorAll('.tab-btn').forEach(btn => {
        btn.classList.remove('active');
      });
      
      // Show selected tab
      document.getElementById(tabName).classList.add('active');
      
      // Activate button
      event.target.classList.add('active');
      
      // Render specific content
      if (tabName === 'my-plants') renderPlants();
      if (tabName === 'calendar') renderCalendar();
      if (tabName === 'analytics') renderAnalytics();
      if (tabName === 'dashboard') renderDashboard();
    }

    // ==================== PLANT RENDERING ====================
    
    function renderPlants() {
      const grid = document.getElementById('plant-grid');
      const emptyState = document.getElementById('empty-state');
      
      // Apply filters
      let filtered = [...plants];
      
      const searchTerm = document.getElementById('search-input').value.toLowerCase();
      if (searchTerm) {
        filtered = filtered.filter(p => 
          p.name.toLowerCase().includes(searchTerm) ||
          (p.scientificName && p.scientificName.toLowerCase().includes(searchTerm))
        );
      }
      
      const typeFilter = document.getElementById('filter-type').value;
      if (typeFilter !== 'all') {
        filtered = filtered.filter(p => p.type === typeFilter);
      }
      
      const healthFilter = document.getElementById('filter-health').value;
      if (healthFilter !== 'all') {
        filtered = filtered.filter(p => {
          const progress = getWaterProgress(p);
          const health = getHealthStatus(progress);
          return health.level === healthFilter;
        });
      }
      
      // Apply sorting
      const sortBy = document.getElementById('sort-by').value;
      filtered.sort((a, b) => {
        switch(sortBy) {
          case 'name':
            return a.name.localeCompare(b.name);
          case 'water':
            return getWaterProgress(a) - getWaterProgress(b);
          case 'health':
            return getWaterProgress(b) - getWaterProgress(a);
          case 'newest':
            return b.id - a.id;
          default:
            return 0;
        }
      });
      
      if (filtered.length === 0) {
        grid.style.display = 'none';
        emptyState.style.display = 'block';
        return;
      }
      
      grid.style.display = 'grid';
      emptyState.style.display = 'none';
      
      grid.innerHTML = filtered.map(plant => {
        const waterProgress = getWaterProgress(plant);
        const health = getHealthStatus(waterProgress);
        const daysSinceWater = getDaysSince(plant.lastWatered);
        const daysUntilWater = plant.waterDays - daysSinceWater;
        
        return `
          <div class="plant-card">
            <div class="plant-image">
              <img src="${plant.image}" alt="${plant.name}">
              <div class="plant-tags">
                <span class="tag">${plant.type}</span>
              </div>
              <div class="health-indicator health-${health.level}">
                ${health.emoji} ${health.label}
              </div>
            </div>
            
            <div class="plant-info">
              <div class="plant-header">
                <div>
                  <div class="plant-name">${plant.name}</div>
                  ${plant.scientificName ? `<div class="plant-scientific">${plant.scientificName}</div>` : ''}
                </div>
                <button class="favorite-btn" onclick="toggleFavorite(${plant.id})">
                  ${plant.favorite ? '‚ù§Ô∏è' : 'ü§ç'}
                </button>
              </div>
              
              <div class="care-metrics">
                <div class="metric">
                  <span>üíß</span>
                  <span>${daysUntilWater > 0 ? `In ${daysUntilWater}d` : 'Water now!'}</span>
                </div>
                <div class="metric">
                  <span>‚òÄÔ∏è</span>
                  <span>${plant.light.charAt(0).toUpperCase() + plant.light.slice(1)}</span>
                </div>
                <div class="metric">
                  <span>üí®</span>
                  <span>${plant.humidity.charAt(0).toUpperCase() + plant.humidity.slice(1)}</span>
                </div>
                <div class="metric">
                  <span>üìç</span>
                  <span>${plant.location || 'Not set'}</span>
                </div>
              </div>
              
              <div class="progress-section">
                <div class="progress-label">
                  <span>Watering Schedule</span>
                  <span>${Math.round(waterProgress)}%</span>
                </div>
                <div class="progress-bar">
                  <div class="progress-fill" style="width: ${waterProgress}%"></div>
                </div>
              </div>
              
              <div class="action-buttons">
                <button class="btn btn-success btn-small" onclick="waterPlant(${plant.id})">
                  üíß Water
                </button>
                <button class="btn btn-primary btn-small" onclick="viewPlantDetails(${plant.id})">
                  üëÅÔ∏è Details
                </button>
                <button class="btn btn-secondary btn-small" onclick="editPlant(${plant.id})">
                  ‚úèÔ∏è Edit
                </button>
                <button class="btn btn-danger btn-small" onclick="deletePlant(${plant.id})">
                  üóëÔ∏è
                </button>
              </div>
            </div>
          </div>
        `;
      }).join('');
    }

    // ==================== PLANT ACTIONS ====================
    
    function openModal(modalId) {
      document.getElementById(modalId).classList.add('active');
      if (modalId === 'add-plant' && !currentEditId) {
        document.getElementById('plant-form').reset();
        document.getElementById('modal-title').textContent = 'Add New Plant';
      }
    }

    function closeModal(modalId) {
      document.getElementById(modalId).classList.remove('active');
      currentEditId = null;
    }

    function savePlant(event) {
      event.preventDefault();
      
      const plantData = {
        name: document.getElementById('plant-name').value,
        scientificName: document.getElementById('plant-scientific').value,
        type: document.getElementById('plant-type').value,
        waterDays: parseInt(document.getElementById('plant-water').value),
        fertilizeDays: parseInt(document.getElementById('plant-fertilize').value),
        light: document.getElementById('plant-light').value,
        humidity: document.getElementById('plant-humidity').value,
        image: document.getElementById('plant-image').value || 'https://images.unsplash.com/photo-1459411552884-841db9b3cc2a?w=600',
        notes: document.getElementById('plant-notes').value,
        location: document.getElementById('plant-location').value,
        acquired: document.getElementById('plant-acquired').value,
        healthScore: 100
      };
      
      if (currentEditId) {
        // Edit existing plant
        const index = plants.findIndex(p => p.id === currentEditId);
        plants[index] = { ...plants[index], ...plantData };
      } else {
        // Add new plant
        plantData.id = Date.now();
        plantData.lastWatered = new Date().toISOString();
        plantData.lastFertilized = new Date().toISOString();
        plantData.favorite = false;
        plants.push(plantData);
      }
      
      savePlants();
      renderPlants();
      closeModal('add-plant');
      currentEditId = null;
    }

    function editPlant(id) {
      const plant = plants.find(p => p.id === id);
      currentEditId = id;
      
      document.getElementById('modal-title').textContent = 'Edit Plant';
      document.getElementById('plant-name').value = plant.name;
      document.getElementById('plant-scientific').value = plant.scientificName || '';
      document.getElementById('plant-type').value = plant.type;
      document.getElementById('plant-water').value = plant.waterDays;
      document.getElementById('plant-fertilize').value = plant.fertilizeDays;
      document.getElementById('plant-light').value = plant.light;
      document.getElementById('plant-humidity').value = plant.humidity;
      document.getElementById('plant-image').value = plant.image;
      document.getElementById('plant-notes').value = plant.notes || '';
      document.getElementById('plant-location').value = plant.location || '';
      document.getElementById('plant-acquired').value = plant.acquired || '';
      
      openModal('add-plant');
    }

    function deletePlant(id) {
      if (confirm('Are you sure you want to delete this plant?')) {
        plants = plants.filter(p => p.id !== id);
        savePlants();
        renderPlants();
      }
    }

    function waterPlant(id) {
      const plant = plants.find(p => p.id === id);
      plant.lastWatered = new Date().toISOString();
      plant.healthScore = Math.min(100, plant.healthScore + 5);
      savePlants();
      renderPlants();
      addNotification(`‚úÖ Watered ${plant.name}`, 'success');
    }

    function toggleFavorite(id) {
      const plant = plants.find(p => p.id === id);
      plant.favorite = !plant.favorite;
      savePlants();
      renderPlants();
    }

    function viewPlantDetails(id) {
      const plant = plants.find(p => p.id === id);
      const waterProgress = getWaterProgress(plant);
      const health = getHealthStatus(waterProgress);
      const daysSinceWater = getDaysSince(plant.lastWatered);
      const daysSinceFertilize = getDaysSince(plant.lastFertilized);
      const age = plant.acquired ? getDaysSince(plant.acquired) : 'Unknown';
      
      const content = `
        <img src="${plant.image}" style="width: 100%; height: 300px; object-fit: cover; border-radius: 15px; margin-bottom: 20px;">
        
        <div style="margin-bottom: 20px;">
          <h3 style="color: var(--primary); margin-bottom: 10px;">üìä Plant Statistics</h3>
          <div class="care-metrics" style="grid-template-columns: 1fr;">
            <div class="metric"><span>üéÇ</span><span>Age: ${age} days</span></div>
            <div class="metric"><span>üíß</span><span>Last watered: ${daysSinceWater} days ago</span></div>
            <div class="metric"><span>üå±</span><span>Last fertilized: ${daysSinceFertilize} days ago</span></div>
            <div class="metric"><span>‚ù§Ô∏è</span><span>Health Score: ${plant.healthScore}%</span></div>
          </div>
        </div>
        
        ${plant.notes ? `
          <div style="margin-bottom: 20px;">
            <h3 style="color: var(--primary); margin-bottom: 10px;">üìù Care Notes</h3>
            <p style="color: var(--text-light); line-height: 1.6;">${plant.notes}</p>
          </div>
        ` : ''}
        
        <div>
          <h3 style="color: var(--primary); margin-bottom: 10px;">üéØ Care Requirements</h3>
          <div class="care-metrics" style="grid-template-columns: 1fr;">
            <div class="metric"><span>üíß</span><span>Water every ${plant.waterDays} days</span></div>
            <div class="metric"><span>üå±</span><span>Fertilize every ${plant.fertilizeDays} days</span></div>
            <div class="metric"><span>‚òÄÔ∏è</span><span>${plant.light.charAt(0).toUpperCase() + plant.light.slice(1)} light</span></div>
            <div class="metric"><span>üí®</span><span>${plant.humidity.charAt(0).toUpperCase() + plant.humidity.slice(1)} humidity</span></div>
          </div>
        </div>
        
        <div class="action-buttons" style="margin-top: 25px;">
          <button class="btn btn-success" onclick="waterPlant(${plant.id}); closeModal('plant-detail'); renderPlants();">
            üíß Water Now
          </button>
          <button class="btn btn-primary" onclick="editPlant(${plant.id}); closeModal('plant-detail');">
            ‚úèÔ∏è Edit Plant
          </button>
        </div>
      `;
      
      document.getElementById('detail-plant-name').textContent = plant.name;
      document.getElementById('plant-detail-content').innerHTML = content;
      openModal('plant-detail');
    }

    // ==================== DASHBOARD ====================
    
    function renderDashboard() {
      updateAllStats();
      renderTodayTasks();
    }

    function updateAllStats() {
      const total = plants.length;
      let needWater = 0;
      let healthy = 0;
      let needAttention = 0;
      
      plants.forEach(plant => {
        const progress = getWaterProgress(plant);
        const health = getHealthStatus(progress);
        
        if (progress < 30) needWater++;
        if (health.level === 'excellent' || health.level === 'good') healthy++;
        if (health.level === 'warning' || health.level === 'danger') needAttention++;
      });
      
      document.getElementById('total-plants').textContent = total;
      document.getElementById('need-water').textContent = needWater;
      document.getElementById('healthy-plants').textContent = healthy;
      document.getElementById('need-attention').textContent = needAttention;
    }

    function renderTodayTasks() {
      const container = document.getElementById('today-tasks');
      const today = new Date();
      const tasks = [];
      
      plants.forEach(plant => {
        const daysSinceWater = getDaysSince(plant.lastWatered);
        const daysUntilWater = plant.waterDays - daysSinceWater;
        
        if (daysUntilWater <= 0) {
          tasks.push({
            plant: plant,
            type: 'water',
            priority: 'high',
            message: `Water ${plant.name}`
          });
        } else if (daysUntilWater <= 2) {
          tasks.push({
            plant: plant,
            type: 'water-soon',
            priority: 'medium',
            message: `${plant.name} needs water in ${daysUntilWater} days`
          });
        }
        
        const daysSinceFertilize = getDaysSince(plant.lastFertilized);
        const daysUntilFertilize = plant.fertilizeDays - daysSinceFertilize;
        
        if (daysUntilFertilize <= 0) {
          tasks.push({
            plant: plant,
            type: 'fertilize',
            priority: 'medium',
            message: `Fertilize ${plant.name}`
          });
        }
      });
      
      if (tasks.length === 0) {
        container.innerHTML = `
          <div style="text-align: center; padding: 40px; color: var(--text-light);">
            <div style="font-size: 3rem; margin-bottom: 10px;">‚úÖ</div>
            <p>All caught up! No tasks for today.</p>
          </div>
        `;
        return;
      }
      
      container.innerHTML = tasks.map(task => `
        <div class="timeline-item">
          <div class="timeline-icon">${task.type === 'water' || task.type === 'water-soon' ? 'üíß' : 'üå±'}</div>
          <div class="timeline-content">
            <h4 style="color: var(--primary); margin-bottom: 8px;">${task.message}</h4>
            <p style="color: var(--text-light); font-size: 0.9rem;">
              ${task.type === 'water' ? 'Overdue!' : task.type === 'water-soon' ? 'Coming up' : 'Time to fertilize'}
            </p>
            ${task.type === 'water' ? `
              <button class="btn btn-success btn-small" onclick="waterPlant(${task.plant.id}); renderDashboard();" style="margin-top: 10px;">
                üíß Water Now
              </button>
            ` : ''}
          </div>
        </div>
      `).join('');
    }

    // ==================== CALENDAR ====================
    
    function renderCalendar() {
      const grid = document.getElementById('calendar-grid');
      const year = currentMonth.getFullYear();
      const month = currentMonth.getMonth();
      
      document.getElementById('calendar-month').textContent = 
        currentMonth.toLocaleDateString('en-US', { month: 'long', year: 'numeric' });
      
      const firstDay = new Date(year, month, 1).getDay();
      const daysInMonth = new Date(year, month + 1, 0).getDate();
      
      const dayNames = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'];
      
      let html = dayNames.map(day => `<div class="day-name">${day}</div>`).join('');
      
      for (let i = 0; i < firstDay; i++) {
        html += '<div class="calendar-day" style="opacity: 0.3;"></div>';
      }
      
      const today = new Date();
      
      for (let day = 1; day <= daysInMonth; day++) {
        const date = new Date(year, month, day);
        const isToday = date.toDateString() === today.toDateString();
        const hasTasks = getTasksForDate(date).length > 0;
        
        html += `
          <div class="calendar-day ${isToday ? 'today' : ''} ${hasTasks ? 'has-tasks' : ''}"
               onclick="showDayTasks(new Date(${year}, ${month}, ${day}))">
            ${day}
          </div>
        `;
      }
      
      grid.innerHTML = html;
    }

    function getTasksForDate(date) {
      const tasks = [];
      
      plants.forEach(plant => {
        const lastWatered = new Date(plant.lastWatered);
        const nextWater = new Date(lastWatered);
        nextWater.setDate(nextWater.getDate() + plant.waterDays);
        
        if (nextWater.toDateString() === date.toDateString()) {
          tasks.push({ plant, type: 'water' });
        }
        
        const lastFertilized = new Date(plant.lastFertilized);
        const nextFertilize = new Date(lastFertilized);
        nextFertilize.setDate(nextFertilize.getDate() + plant.fertilizeDays);
        
        if (nextFertilize.toDateString() === date.toDateString()) {
          tasks.push({ plant, type: 'fertilize' });
        }
      });
      
      return tasks;
    }

    function showDayTasks(date) {
      const tasks = getTasksForDate(date);
      const container = document.getElementById('day-tasks');
      const dateStr = date.toLocaleDateString('en-US', { 
        weekday: 'long', 
        year: 'numeric', 
        month: 'long', 
        day: 'numeric' 
      });
      
      document.getElementById('selected-date').textContent = dateStr;
      
      if (tasks.length === 0) {
        container.innerHTML = `
          <div style="text-align: center; padding: 40px; color: var(--text-light);">
            <div style="font-size: 3rem; margin-bottom: 10px;">üìÖ</div>
            <p>No tasks scheduled for this day.</p>
          </div>
        `;
        return;
      }
      
      container.innerHTML = tasks.map(task => `
        <div class="timeline-item">
          <div class="timeline-icon">${task.type === 'water' ? 'üíß' : 'üå±'}</div>
          <div class="timeline-content">
            <h4 style="color: var(--primary); margin-bottom: 5px;">
              ${task.type === 'water' ? 'Water' : 'Fertilize'} ${task.plant.name}
            </h4>
            <p style="color: var(--text-light); font-size: 0.9rem;">
              ${task.plant.location || 'No location set'}
            </p>
          </div>
        </div>
      `).join('');
    }

    function changeMonth(delta) {
      currentMonth.setMonth(currentMonth.getMonth() + delta);
      renderCalendar();
    }

    function goToToday() {
      currentMonth = new Date();
      renderCalendar();
      showDayTasks(new Date());
    }

    // ==================== ANALYTICS ====================
    
    function renderAnalytics() {
      renderGrowthChart();
      updateAnalyticsStats();
      renderTypeDistribution();
    }

    function renderGrowthChart() {
      const container = document.getElementById('growth-chart');
      const months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun'];
      const data = [2, 3, 5, 7, 8, plants.length];
      const max = Math.max(...data);
      
      container.innerHTML = months.map((month, i) => {
        const height = (data[i] / max) * 100;
        return `
          <div style="flex: 1; display: flex; flex-direction: column; align-items: center;">
            <div class="chart-bar" style="height: ${height}%;" title="${data[i]} plants">
              <div style="position: absolute; top: -25px; left: 50%; transform: translateX(-50%); font-weight: 700; color: var(--text);">
                ${data[i]}
              </div>
            </div>
            <div class="chart-label">${month}</div>
          </div>
        `;
      }).join('');
    }

    function updateAnalyticsStats() {
      const avgAge = Math.round(
        plants.reduce((sum, p) => {
          const age = p.acquired ? getDaysSince(p.acquired) : 30;
          return sum + age;
        }, 0) / (plants.length || 1)
      );
      
      const avgWater = Math.round(
        plants.reduce((sum, p) => sum + p.waterDays, 0) / (plants.length || 1)
      );
      
      const favoriteCount = plants.filter(p => p.favorite).length;
      
      document.getElementById('avg-age').textContent = avgAge;
      document.getElementById('water-frequency').textContent = avgWater + ' days';
      document.getElementById('favorite-count').textContent = favoriteCount;
      document.getElementById('care-streak').textContent = '12'; // Sample data
    }

    function renderTypeDistribution() {
      const container = document.getElementById('type-distribution');
      const types = {};
      
      plants.forEach(plant => {
        types[plant.type] = (types[plant.type] || 0) + 1;
      });
      
      const total = plants.length || 1;
      
      container.innerHTML = Object.entries(types).map(([type, count]) => {
        const percentage = (count / total) * 100;
        return `
          <div style="margin-bottom: 15px;">
            <div style="display: flex; justify-content: space-between; margin-bottom: 8px;">
              <span style="font-weight: 600; text-transform: capitalize;">${type}</span>
              <span style="color: var(--text-light);">${count} (${Math.round(percentage)}%)</span>
            </div>
            <div class="progress-bar">
              <div class="progress-fill" style="width: ${percentage}%"></div>
            </div>
          </div>
        `;
      }).join('');
    }

    // ==================== NOTIFICATIONS ====================
    
    function checkNotifications() {
      const urgent = plants.filter(p => getWaterProgress(p) < 20).length;
      document.getElementById('notification-count').textContent = urgent;
      document.getElementById('notification-count').style.display = urgent > 0 ? 'flex' : 'none';
    }

    function toggleNotifications() {
      const panel = document.getElementById('notification-panel');
      panel.classList.toggle('active');
      
      if (panel.classList.contains('active')) {
        renderNotifications();
      }
    }

    function renderNotifications() {
      const container = document.getElementById('notification-list');
      const urgent = plants.filter(p => getWaterProgress(p) < 20);
      
      if (urgent.length === 0) {
        container.innerHTML = `
          <div style="padding: 40px; text-align: center; color: var(--text-light);">
            <div style="font-size: 3rem; margin-bottom: 10px;">‚úÖ</div>
            <p>All plants are healthy!</p>
          </div>
        `;
        return;
      }
      
      container.innerHTML = urgent.map(plant => `
        <div class="notification-item unread" onclick="viewPlantDetails(${plant.id}); closeNotifications();">
          <div style="font-weight: 600; margin-bottom: 5px;">${plant.name} needs water!</div>
          <div style="font-size: 0.85rem; color: var(--text-light);">
            Last watered ${getDaysSince(plant.lastWatered)} days ago
          </div>
        </div>
      `).join('');
    }

    function closeNotifications() {
      document.getElementById('notification-panel').classList.remove('active');
    }

    function addNotification(message, type) {
      // Simple toast notification (you can enhance this)
      console.log(`${type}: ${message}`);
    }

    // ==================== KNOWLEDGE BASE ====================
    
    const knowledgeContent = {
      watering: {
        title: 'üíß Watering Guide',
        content: `
          <h3 style="color: var(--primary); margin-bottom: 15px;">How to Water Your Plants</h3>
          
          <h4 style="margin-top: 20px; margin-bottom: 10px;">General Rules:</h4>
          <ul style="line-height: 1.8; color: var(--text-light);">
            <li>Check soil moisture before watering - stick your finger 1-2 inches deep</li>
            <li>Water thoroughly until it drains from the bottom</li>
            <li>Use room temperature water</li>
            <li>Water in the morning when possible</li>
            <li>Avoid getting water on leaves of fuzzy plants</li>
          </ul>
          
          <h4 style="margin-top: 20px; margin-bottom: 10px;">Signs of Overwatering:</h4>
          <ul style="line-height: 1.8; color: var(--text-light);">
            <li>Yellow leaves (especially lower leaves)</li>
            <li>Wilting despite wet soil</li>
            <li>Moldy soil or fungus gnats</li>
            <li>Root rot (brown, mushy roots)</li>
          </ul>
          
          <h4 style="margin-top: 20px; margin-bottom: 10px;">Signs of Underwatering:</h4>
          <ul style="line-height: 1.8; color: var(--text-light);">
            <li>Dry, crispy leaves</li>
            <li>Drooping or wilting</li>
            <li>Slow growth</li>
            <li>Soil pulling away from pot edges</li>
          </ul>
        `
      },
      light: {
        title: '‚òÄÔ∏è Light Requirements',
        content: `
          <h3 style="color: var(--primary); margin-bottom: 15px;">Understanding Plant Lighting</h3>
          
          <h4 style="margin-top: 20px; margin-bottom: 10px;">Light Levels:</h4>
          <ul style="line-height: 1.8; color: var(--text-light);">
            <li><strong>Low Light:</strong> North-facing windows, 3-5 feet from windows (Snake plant, Pothos)</li>
            <li><strong>Medium Light:</strong> East-facing windows, filtered light (Peace lily, Spider plant)</li>
            <li><strong>Bright Indirect:</strong> Near south/west windows with sheer curtains (Monstera, Fiddle leaf)</li>
            <li><strong>Direct Sun:</strong> South-facing windows, full sun (Cacti, Succulents)</li>
          </ul>
          
          <h4 style="margin-top: 20px; margin-bottom: 10px;">Tips:</h4>
          <ul style="line-height: 1.8; color: var(--text-light);">
            <li>Rotate plants weekly for even growth</li>
            <li>Clean leaves monthly to maximize light absorption</li>
            <li>Use grow lights if natural light is limited</li>
            <li>Watch for leggy growth (sign of too little light)</li>
          </ul>
        `
      },
      soil: {
        title: 'ü™¥ Soil & Fertilizer',
        content: `
          <h3 style="color: var(--primary); margin-bottom: 15px;">Choosing the Right Soil Mix</h3>
          
          <h4 style="margin-top: 20px; margin-bottom: 10px;">Common Soil Types:</h4>
          <ul style="line-height: 1.8; color: var(--text-light);">
            <li><strong>Standard Potting Mix:</strong> Most houseplants</li>
            <li><strong>Cactus/Succulent Mix:</strong> Well-draining, sandy soil</li>
            <li><strong>Orchid Mix:</strong> Bark-based, very airy</li>
            <li><strong>African Violet Mix:</strong> Light, fluffy soil</li>
          </ul>
          
          <h4 style="margin-top: 20px; margin-bottom: 10px;">Fertilizing Tips:</h4>
          <ul style="line-height: 1.8; color: var(--text-light);">
            <li>Fertilize during growing season (spring/summer)</li>
            <li>Use diluted liquid fertilizer every 2-4 weeks</li>
            <li>Reduce or stop fertilizing in winter</li>
            <li>Flush soil periodically to prevent salt buildup</li>
          </ul>
        `
      },
      pests: {
        title: 'üêõ Pest Management',
        content: `
          <h3 style="color: var(--primary); margin-bottom: 15px;">Common Plant Pests</h3>
          
          <h4 style="margin-top: 20px; margin-bottom: 10px;">Common Pests:</h4>
          <ul style="line-height: 1.8; color: var(--text-light);">
            <li><strong>Spider Mites:</strong> Tiny webs, stippled leaves - spray with water or neem oil</li>
            <li><strong>Mealybugs:</strong> White cottony masses - remove with alcohol-soaked cotton swab</li>
            <li><strong>Aphids:</strong> Small green/black insects - spray with soapy water</li>
            <li><strong>Fungus Gnats:</strong> Tiny flying insects - let soil dry out, use sticky traps</li>
          </ul>
          
          <h4 style="margin-top: 20px; margin-bottom: 10px;">Prevention:</h4>
          <ul style="line-height: 1.8; color: var(--text-light);">
            <li>Inspect new plants before bringing home</li>
            <li>Quarantine new plants for 2 weeks</li>
            <li>Keep plants healthy (stressed plants attract pests)</li>
            <li>Maintain good air circulation</li>
          </ul>
        `
      },
      propagation: {
        title: 'üå± Propagation Methods',
        content: `
          <h3 style="color: var(--primary); margin-bottom: 15px;">How to Propagate Plants</h3>
          
          <h4 style="margin-top: 20px; margin-bottom: 10px;">Water Propagation:</h4>
          <ul style="line-height: 1.8; color: var(--text-light);">
            <li>Cut 4-6 inch stem below a node</li>
            <li>Remove lower leaves</li>
            <li>Place in water in bright, indirect light</li>
            <li>Change water weekly</li>
            <li>Plant when roots are 2-3 inches long</li>
          </ul>
          
          <h4 style="margin-top: 20px; margin-bottom: 10px;">Soil Propagation:</h4>
          <ul style="line-height: 1.8; color: var(--text-light);">
            <li>Dip cutting in rooting hormone (optional)</li>
            <li>Plant in moist potting mix</li>
            <li>Keep soil consistently moist</li>
            <li>Cover with plastic bag for humidity</li>
          </ul>
          
          <h4 style="margin-top: 20px; margin-bottom: 10px;">Division:</h4>
          <ul style="line-height: 1.8; color: var(--text-light);">
            <li>Best for plants with multiple stems</li>
            <li>Gently separate root ball into sections</li>
            <li>Each section should have roots and leaves</li>
            <li>Plant immediately in fresh soil</li>
          </ul>
        `
      },
      troubleshooting: {
        title: 'üîß Troubleshooting Common Problems',
        content: `
          <h3 style="color: var(--primary); margin-bottom: 15px;">Plant Problem Solving</h3>
          
          <h4 style="margin-top: 20px; margin-bottom: 10px;">Yellow Leaves:</h4>
          <ul style="line-height: 1.8; color: var(--text-light);">
            <li>Overwatering (most common)</li>
            <li>Natural aging (lower leaves)</li>
            <li>Nutrient deficiency</li>
            <li>Too much direct sunlight</li>
          </ul>
          
          <h4 style="margin-top: 20px; margin-bottom: 10px;">Brown Leaf Tips:</h4>
          <ul style="line-height: 1.8; color: var(--text-light);">
            <li>Low humidity</li>
            <li>Fluoride in tap water</li>
            <li>Fertilizer burn</li>
            <li>Underwatering</li>
          </ul>
          
          <h4 style="margin-top: 20px; margin-bottom: 10px;">Drooping/Wilting:</h4>
          <ul style="line-height: 1.8; color: var(--text-light);">
            <li>Underwatering</li>
            <li>Overwatering (if soil is wet)</li>
            <li>Root bound</li>
            <li>Shock from repotting or moving</li>
          </ul>
        `
      },
      seasonal: {
        title: 'üåç Seasonal Care Adjustments',
        content: `
          <h3 style="color: var(--primary); margin-bottom: 15px;">Caring for Plants Through the Seasons</h3>
          
          <h4 style="margin-top: 20px; margin-bottom: 10px;">Spring/Summer (Growing Season):</h4>
          <ul style="line-height: 1.8; color: var(--text-light);">
            <li>Increase watering frequency</li>
            <li>Fertilize every 2-4 weeks</li>
            <li>Best time for repotting</li>
            <li>Propagate and prune</li>
            <li>Move plants outside if possible</li>
          </ul>
          
          <h4 style="margin-top: 20px; margin-bottom: 10px;">Fall/Winter (Dormant Season):</h4>
          <ul style="line-height: 1.8; color: var(--text-light);">
            <li>Reduce watering (plants use less water)</li>
            <li>Stop or reduce fertilizing</li>
            <li>Increase humidity (heating dries air)</li>
            <li>Provide more light (shorter days)</li>
            <li>Avoid temperature extremes</li>
          </ul>
        `
      },
      repotting: {
        title: 'üì¶ Repotting Guide',
        content: `
          <h3 style="color: var(--primary); margin-bottom: 15px;">When and How to Repot</h3>
          
          <h4 style="margin-top: 20px; margin-bottom: 10px;">Signs You Need to Repot:</h4>
          <ul style="line-height: 1.8; color: var(--text-light);">
            <li>Roots growing through drainage holes</li>
            <li>Roots circling the pot surface</li>
            <li>Water runs straight through without absorbing</li>
            <li>Plant is top-heavy and tips over</li>
            <li>Growth has slowed significantly</li>
          </ul>
          
          <h4 style="margin-top: 20px; margin-bottom: 10px;">Repotting Steps:</h4>
          <ul style="line-height: 1.8; color: var(--text-light);">
            <li>Water plant 1-2 days before</li>
            <li>Choose pot 1-2 inches larger</li>
            <li>Gently remove plant and loosen roots</li>
            <li>Trim any dead or damaged roots</li>
            <li>Add fresh soil and plant at same depth</li>
            <li>Water thoroughly and place in shade for a few days</li>
          </ul>
          
          <h4 style="margin-top: 20px; margin-bottom: 10px;">Best Time:</h4>
          <ul style="line-height: 1.8; color: var(--text-light);">
            <li>Spring is ideal (start of growing season)</li>
            <li>Avoid repotting during flowering</li>
            <li>Don't repot sick plants (fix problem first)</li>
          </ul>
        `
      }
    };

    function showKnowledge(topic) {
      const data = knowledgeContent[topic];
      document.getElementById('knowledge-title').textContent = data.title;
      document.getElementById('knowledge-content').innerHTML = data.content;
      openModal('knowledge-modal');
    }

    // ==================== THEME TOGGLE ====================
    
    document.getElementById('theme-toggle').addEventListener('click', () => {
      document.body.classList.toggle('dark-theme');
      const isDark = document.body.classList.contains('dark-theme');
      localStorage.setItem('theme', isDark ? 'dark' : 'light');
    });

    // Load saved theme
    if (localStorage.getItem('theme') === 'dark') {
      document.body.classList.add('dark-theme');
    }

    // ==================== EVENT LISTENERS ====================
    
    document.getElementById('search-input').addEventListener('input', renderPlants);
    document.getElementById('filter-type').addEventListener('change', renderPlants);
    document.getElementById('filter-health').addEventListener('change', renderPlants);
    document.getElementById('sort-by').addEventListener('change', renderPlants);
    document.getElementById('notifications-btn').addEventListener('click', toggleNotifications);

    // Close modals when clicking outside
    document.querySelectorAll('.modal').forEach(modal => {
      modal.addEventListener('click', (e) => {
        if (e.target === modal) {
          modal.classList.remove('active');
        }
      });
    });

    // ==================== INITIALIZATION ====================
    
    function init() {
      renderPlants();
      renderDashboard();
      renderCalendar();
      showDayTasks(new Date());
      checkNotifications();
      initializeHeroSearch();
    }

    init();

    // ==================== HERO SEARCH FUNCTIONALITY ====================
    
    function initializeHeroSearch() {
      const heroSearch = document.getElementById('hero-search');
      const searchDropdown = document.getElementById('search-dropdown');
      const clearBtn = document.getElementById('clear-search');

      heroSearch.addEventListener('input', (e) => {
        const query = e.target.value.trim().toLowerCase();
        
        if (query.length === 0) {
          searchDropdown.classList.remove('active');
          clearBtn.style.display = 'none';
          return;
        }

        clearBtn.style.display = 'flex';
        performQuickSearch(query);
      });

      heroSearch.addEventListener('focus', (e) => {
        const query = e.target.value.trim().toLowerCase();
        if (query.length > 0) {
          performQuickSearch(query);
        }
      });

      clearBtn.addEventListener('click', () => {
        heroSearch.value = '';
        searchDropdown.classList.remove('active');
        clearBtn.style.display = 'none';
        heroSearch.focus();
      });

      // Close dropdown when clicking outside
      document.addEventListener('click', (e) => {
        if (!e.target.closest('.hero-search')) {
          searchDropdown.classList.remove('active');
        }
      });

      // Keyboard navigation
      heroSearch.addEventListener('keydown', (e) => {
        if (e.key === 'Escape') {
          searchDropdown.classList.remove('active');
          heroSearch.blur();
        }
      });
    }

    function performQuickSearch(query) {
      const searchDropdown = document.getElementById('search-dropdown');
      
      // Search in plant names and scientific names
      const results = plants.filter(plant => 
        plant.name.toLowerCase().includes(query) ||
        (plant.scientificName && plant.scientificName.toLowerCase().includes(query)) ||
        plant.type.toLowerCase().includes(query) ||
        (plant.location && plant.location.toLowerCase().includes(query))
      );

      if (results.length === 0) {
        searchDropdown.innerHTML = `
          <div class="search-no-results">
            <div class="search-no-results-icon">üîç</div>
            <h3 style="color: var(--text); margin-bottom: 5px;">No plants found</h3>
            <p>Try searching for "${query}" with a different spelling or add a new plant!</p>
            <button class="btn btn-primary" onclick="openModal('add-plant'); closeSearchDropdown();" style="margin-top: 15px;">
              ‚ûï Add New Plant
            </button>
          </div>
        `;
        searchDropdown.classList.add('active');
        return;
      }

      // Display results with highlighting
      searchDropdown.innerHTML = results.map(plant => {
        const waterProgress = getWaterProgress(plant);
        const health = getHealthStatus(waterProgress);
        const daysSinceWater = getDaysSince(plant.lastWatered);
        const daysUntilWater = plant.waterDays - daysSinceWater;
        
        // Highlight matching text
        const highlightText = (text, query) => {
          if (!text) return '';
          const regex = new RegExp(`(${query})`, 'gi');
          return text.replace(regex, '<mark style="background: yellow; padding: 2px 4px; border-radius: 3px;">$1</mark>');
        };

        return `
          <div class="search-result-item" onclick="showQuickPlantInfo(${plant.id})">
            <img src="${plant.image}" alt="${plant.name}" class="search-result-image">
            <div class="search-result-info">
              <div class="search-result-name">${highlightText(plant.name, query)}</div>
              ${plant.scientificName ? `
                <div class="search-result-scientific">${highlightText(plant.scientificName, query)}</div>
              ` : ''}
              <div class="search-result-quick-info">
                <span class="search-result-badge">
                  <span>${health.emoji}</span>
                  <span>${health.label}</span>
                </span>
                <span class="search-result-badge">
                  <span>üíß</span>
                  <span>${daysUntilWater > 0 ? `Water in ${daysUntilWater}d` : 'Water now!'}</span>
                </span>
                <span class="search-result-badge">
                  <span>üè∑Ô∏è</span>
                  <span>${plant.type}</span>
                </span>
                ${plant.location ? `
                  <span class="search-result-badge">
                    <span>üìç</span>
                    <span>${plant.location}</span>
                  </span>
                ` : ''}
              </div>
            </div>
          </div>
        `;
      }).join('');

      searchDropdown.classList.add('active');
    }

    function closeSearchDropdown() {
      document.getElementById('search-dropdown').classList.remove('active');
      document.getElementById('hero-search').value = '';
      document.getElementById('clear-search').style.display = 'none';
    }

    function showQuickPlantInfo(plantId) {
      const plant = plants.find(p => p.id === plantId);
      if (!plant) return;

      const waterProgress = getWaterProgress(plant);
      const health = getHealthStatus(waterProgress);
      const daysSinceWater = getDaysSince(plant.lastWatered);
      const daysSinceFertilize = getDaysSince(plant.lastFertilized);
      const daysUntilWater = plant.waterDays - daysSinceWater;
      const daysUntilFertilize = plant.fertilizeDays - daysSinceFertilize;
      const age = plant.acquired ? getDaysSince(plant.acquired) : 'Unknown';

      const content = `
        <div class="plant-info-header">
          <img src="${plant.image}" alt="${plant.name}" class="plant-info-image">
          <div class="plant-info-title-section">
            <h2 class="plant-info-title">${plant.name}</h2>
            ${plant.scientificName ? `
              <div class="plant-info-scientific">${plant.scientificName}</div>
            ` : ''}
            <div class="plant-info-tags-row">
              <span class="info-tag">${plant.type.toUpperCase()}</span>
              <span class="info-tag secondary health-${health.level}">${health.emoji} ${health.label}</span>
              ${plant.favorite ? '<span class="info-tag warning">‚ù§Ô∏è Favorite</span>' : ''}
            </div>
            ${plant.location ? `
              <p style="color: var(--text-light); display: flex; align-items: center; gap: 8px;">
                <span>üìç</span>
                <span>${plant.location}</span>
              </p>
            ` : ''}
          </div>
        </div>

        <!-- Care Schedule -->
        <div class="plant-info-section">
          <h3>üìÖ Care Schedule</h3>
          <div class="info-grid">
            <div class="info-item">
              <div class="info-item-icon">üíß</div>
              <div class="info-item-content">
                <h4>Watering</h4>
                <p>${daysUntilWater > 0 ? `In ${daysUntilWater} days` : 'Water now!'}</p>
              </div>
            </div>
            <div class="info-item">
              <div class="info-item-icon">üå±</div>
              <div class="info-item-content">
                <h4>Fertilizing</h4>
                <p>${daysUntilFertilize > 0 ? `In ${daysUntilFertilize} days` : 'Fertilize now!'}</p>
              </div>
            </div>
            <div class="info-item">
              <div class="info-item-icon">‚è±Ô∏è</div>
              <div class="info-item-content">
                <h4>Last Watered</h4>
                <p>${daysSinceWater} days ago</p>
              </div>
            </div>
            <div class="info-item">
              <div class="info-item-icon">üéÇ</div>
              <div class="info-item-content">
                <h4>Plant Age</h4>
                <p>${age} days</p>
              </div>
            </div>
          </div>

          <!-- Progress Bar -->
          <div class="progress-section" style="margin-top: 20px;">
            <div class="progress-label">
              <span>üíß Watering Progress</span>
              <span>${Math.round(waterProgress)}%</span>
            </div>
            <div class="progress-bar">
              <div class="progress-fill" style="width: ${waterProgress}%"></div>
            </div>
          </div>
        </div>

        <!-- Care Requirements -->
        <div class="plant-info-section">
          <h3>üéØ Care Requirements</h3>
          <div class="info-grid">
            <div class="info-item">
              <div class="info-item-icon">üíß</div>
              <div class="info-item-content">
                <h4>Water Frequency</h4>
                <p>Every ${plant.waterDays} days</p>
              </div>
            </div>
            <div class="info-item">
              <div class="info-item-icon">üå±</div>
              <div class="info-item-content">
                <h4>Fertilize Frequency</h4>
                <p>Every ${plant.fertilizeDays} days</p>
              </div>
            </div>
            <div class="info-item">
              <div class="info-item-icon">‚òÄÔ∏è</div>
              <div class="info-item-content">
                <h4>Light Level</h4>
                <p>${plant.light.charAt(0).toUpperCase() + plant.light.slice(1)}</p>
              </div>
            </div>
            <div class="info-item">
              <div class="info-item-icon">üí®</div>
              <div class="info-item-content">
                <h4>Humidity</h4>
                <p>${plant.humidity.charAt(0).toUpperCase() + plant.humidity.slice(1)}</p>
              </div>
            </div>
          </div>
        </div>

        <!-- Health & Statistics -->
        <div class="plant-info-section">
          <h3>üìä Health & Statistics</h3>
          <div class="info-grid">
            <div class="info-item">
              <div class="info-item-icon">‚ù§Ô∏è</div>
              <div class="info-item-content">
                <h4>Health Score</h4>
                <p>${plant.healthScore}%</p>
              </div>
            </div>
            <div class="info-item">
              <div class="info-item-icon">üí™</div>
              <div class="info-item-content">
                <h4>Overall Status</h4>
                <p>${health.label}</p>
              </div>
            </div>
            ${plant.acquired ? `
              <div class="info-item">
                <div class="info-item-icon">üìÖ</div>
                <div class="info-item-content">
                  <h4>Acquired Date</h4>
                  <p>${new Date(plant.acquired).toLocaleDateString()}</p>
                </div>
              </div>
            ` : ''}
            <div class="info-item">
              <div class="info-item-icon">üî¢</div>
              <div class="info-item-content">
                <h4>Plant ID</h4>
                <p>#${plant.id}</p>
              </div>
            </div>
          </div>
        </div>

        ${plant.notes ? `
          <div class="plant-info-section">
            <h3>üìù Care Notes</h3>
            <div style="background: var(--bg); padding: 20px; border-radius: 12px; border-left: 4px solid var(--primary);">
              <p style="color: var(--text); line-height: 1.8; margin: 0;">${plant.notes}</p>
            </div>
          </div>
        ` : ''}

        <!-- Quick Actions -->
        <div class="action-buttons" style="margin-top: 30px;">
          <button class="btn btn-success" onclick="waterPlant(${plant.id}); closeModal('quick-plant-info'); renderPlants(); renderDashboard();">
            üíß Water Now
          </button>
          <button class="btn btn-primary" onclick="fertilizePlant(${plant.id}); closeModal('quick-plant-info'); renderPlants();">
            üå± Fertilize
          </button>
          <button class="btn btn-secondary" onclick="editPlant(${plant.id}); closeModal('quick-plant-info');">
            ‚úèÔ∏è Edit Plant
          </button>
          <button class="btn ${plant.favorite ? 'btn-danger' : 'btn-primary'}" onclick="toggleFavorite(${plant.id}); showQuickPlantInfo(${plant.id});">
            ${plant.favorite ? 'üíî Unfavorite' : '‚ù§Ô∏è Favorite'}
          </button>
        </div>
      `;

      document.getElementById('quick-plant-content').innerHTML = content;
      openModal('quick-plant-info');
      closeSearchDropdown();
    }

    function fertilizePlant(id) {
      const plant = plants.find(p => p.id === id);
      plant.lastFertilized = new Date().toISOString();
      plant.healthScore = Math.min(100, plant.healthScore + 3);
      savePlants();
      renderPlants();
      addNotification(`‚úÖ Fertilized ${plant.name}`, 'success');
    }
    
  </script>

</body>
</html>